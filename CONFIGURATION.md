## General

It is possible to scape two metrics formats: per project or per organization.
General flow is the same:
* Specify endpoint
* Provide account key
* Provide entity name

> Note: `{TOKEN}` in examples should be replaced by API auth token. Token can be generated by following `https://sentry.com/api` link. It is enough to have read only permissions for entity you would like to scrape.

## Project metrics

For per-project scraping it is possible to use the following example:

Exporter config:
```yml
modules:
  sentry:
    prober: http
    timeout: 5s
    http:
      prefix: https://sentry.com/api/0/projects/
      headers:
        Authorization: Bearer {TOKEN}
```

Prometheus scrape config:
```yml
scrape_configs:
  - job_name: 'sentry'
    metrics_path: /probe
    static_configs:
      - targets:
        - {project name}    # First project name.
        - {second project name}   # Second project name
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: 127.0.0.1:9412  # The sentry exporter's real hostname:port.
```


## Organization metrics

It is also possible to scrape on organization level.

> Note: default organization is called "sentry" by default.

```yml
modules:
  sentry:
    prober: http
    timeout: 5s
    http:
      prefix: https://sentry.com/api/0/organizations/
      headers:
        Authorization: Bearer {TOKEN}
```

Prometheus scrape config:
```yml
scrape_configs:
  - job_name: 'sentry'
    metrics_path: /probe
    static_configs:
      - targets:
        - {organization name}    # First org name.
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: 127.0.0.1:9412  # The sentry exporter's real hostname:port.
```


## Using with self-hosted Sentry

Using self-hosted version is absolutely the same apart from changing domain in prefix to your point at your sentry instance.

```yml
modules:
  sentry:
    prober: http
    timeout: 5s
    http:
      prefix: https://sentry.evilcorp.com/api/0/organizations/
      headers:
        Authorization: Bearer {TOKEN}
```